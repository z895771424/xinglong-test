<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      #loading {
        width: 0;
        height: 50px;
        background-color: #9b59b6;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 30px;
        color: #fff;
        transition: all 1s;
      }
    </style>
  </head>
  <body>
    <div id="loading">0%</div>
    <script>
      const userList = [
        {
          name: 'longlong',
          age: 12,
          gender: '男',
          hobby: 'play basketball'
        },
        {
          name: 'xuxu',
          age: 124,
          gender: '男',
          hobby: 'play basketball'
        },
        {
          name: 'ruirui',
          age: 152,
          gender: '女',
          hobby: 'play basketball'
        },
        {
          name: 'yiyi',
          age: 125,
          gender: '男',
          hobby: 'play basketball'
        },
        {
          name: 'haha',
          age: 122,
          gender: '男',
          hobby: 'play basketball'
        }
      ]
      function ajax(name) {
        let searchUser = userList.filter((item) => {
          return item.name === name
        })
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve(...searchUser)
          }, 1000)
        })
      }
      const loading1 = document.querySelector('#loading')
      async function loading(users) {
        for (let i = 0; i < users.length; i++) {
          let user = await ajax(users[i])
          let progress = ((i + 1) / users.length) * 100
          loading1.style.width = progress + '%'
          loading1.innerHTML = Math.round(progress) + '%'
        }
      }
      loading(['longlong', 'xuxu', 'ruirui'])
    </script>
  </body>
</html>
